<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#C41E3A">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Tchie Nos">
    <meta name="description" content="Commandez vos pizzas et plats italiens √† Del√©mont">
    <meta name="mobile-web-app-capable" content="yes">
    
    <title>Tchie Nos Pizzeria</title>
    
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32x32.png">
    <link rel="apple-touch-icon" href="icons/icon-512.png">
    <link rel="manifest" href="manifest.json">
    
    <style>
        :root {
            /* COULEURS OFFICIELLES TCHIE NOS - Brand Style Guide */
            --primary-red: #C41E3A;        /* Rouge Cardinal - Principal */
            --primary-dark: #9B1B30;       /* Rouge fonc√© (d√©grad√©) */
            --accent-gold: #FFD700;        /* Or/Jaune - Accents */
            --navy-blue: #1E3A5F;          /* Bleu Marine - Texte */
            --dark-navy: #0F2A44;          /* Bleu tr√®s fonc√© */
            --cream: #F9F6E8;              /* Cr√®me - Fond */
            --light-cream: #F5F5DC;        /* Beige clair */
            --white: #FFFFFF;
            --text-dark: #1A1A1A;
            --gray-text: #666666;
            --whatsapp-green: #25D366;     /* Conserv√© pour WA */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html { height: 100%; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif; 
            background: var(--cream); 
            padding-bottom: 100px; 
            min-height: 100%;
            overscroll-behavior-y: none;
            color: var(--navy-blue);
        }

        .header { 
            background: linear-gradient(135deg, var(--primary-red), var(--primary-dark)); 
            color: var(--white); 
            padding: 20px; 
            text-align: center; 
            position: sticky; 
            top: 0; 
            z-index: 100; 
            border-bottom: 4px solid var(--accent-gold); 
        }
        .header img { 
            width: 120px; 
            height: 120px; 
            background: var(--white); 
            border-radius: 50%; 
            margin-bottom: 10px; 
            padding: 5px; 
            border: 3px solid var(--accent-gold); 
            object-fit: cover; 
        }
        .badges { margin-top: 10px; }
        .badge { 
            display: inline-block; 
            background: var(--accent-gold); 
            color: var(--navy-blue); 
            padding: 5px 12px; 
            border-radius: 15px; 
            font-size: 12px; 
            font-weight: bold; 
            margin: 2px; 
        }

        .nav { 
            display: flex; 
            overflow-x: auto; 
            gap: 10px; 
            padding: 15px; 
            background: var(--white); 
            position: sticky; 
            top: 220px; 
            z-index: 99; 
            box-shadow: 0 2px 10px rgba(30, 58, 95, 0.1); 
            scrollbar-width: none; 
        }
        .nav::-webkit-scrollbar { display: none; }
        .nav button { 
            flex-shrink: 0; 
            padding: 12px 20px; 
            border: 2px solid var(--primary-red); 
            background: var(--white); 
            color: var(--primary-red); 
            border-radius: 25px; 
            font-weight: bold; 
            font-size: 14px; 
            cursor: pointer; 
            transition: all 0.3s; 
        }
        .nav button:hover, .nav button.active { 
            background: var(--primary-red); 
            color: var(--white); 
        }

        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .category { display: none; animation: fadeIn 0.3s; }
        .category.active { display: block; }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(10px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        h2 { 
            color: var(--navy-blue); 
            margin: 20px 0 15px 0; 
            padding-bottom: 10px; 
            border-bottom: 3px solid var(--accent-gold); 
        }

        .item { 
            background: var(--white); 
            border-radius: 12px; 
            padding: 15px; 
            margin-bottom: 12px; 
            border-left: 4px solid var(--primary-red); 
            box-shadow: 0 2px 8px rgba(30, 58, 95, 0.08); 
        }
        .item h3 { 
            color: var(--navy-blue); 
            margin-bottom: 5px; 
            font-size: 16px; 
        }
        .item p { 
            color: var(--gray-text); 
            font-size: 13px; 
            margin-bottom: 8px; 
        }
        .item .price { 
            color: var(--primary-red); 
            font-weight: bold; 
            font-size: 18px; 
        }

        .qty-control { display: flex; align-items: center; gap: 10px; margin-top: 10px; }
        .qty-control button { 
            width: 35px; 
            height: 35px; 
            border-radius: 50%; 
            border: none; 
            background: var(--primary-red); 
            color: var(--white); 
            font-size: 18px; 
            font-weight: bold; 
            cursor: pointer; 
            transition: all 0.2s; 
        }
        .qty-control button:hover:not(:disabled) { 
            background: var(--primary-dark); 
            transform: scale(1.1); 
        }
        .qty-control button:disabled { 
            background: #ccc; 
            cursor: not-allowed; 
        }
        .qty-control span { 
            font-weight: bold; 
            min-width: 30px; 
            text-align: center; 
            font-size: 16px; 
            color: var(--navy-blue);
        }

        .cart { 
            position: fixed; 
            bottom: 0; 
            left: 0; 
            right: 0; 
            background: var(--white); 
            padding: 15px 20px; 
            border-top: 3px solid var(--accent-gold); 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            z-index: 1000; 
            box-shadow: 0 -2px 10px rgba(30, 58, 95, 0.1); 
        }
        .cart button { 
            background: var(--whatsapp-green); 
            color: var(--white); 
            border: none; 
            padding: 15px 25px; 
            border-radius: 25px; 
            font-weight: bold; 
            cursor: pointer; 
            font-size: 16px; 
            transition: all 0.2s; 
        }
        .cart button:hover:not(:disabled) { 
            background: #128C7E; 
            transform: scale(1.05); 
        }
        .cart button:disabled { 
            background: #ccc; 
            cursor: not-allowed; 
        }

        #orderModal { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            right: 0; 
            bottom: 0; 
            background: rgba(15, 42, 68, 0.6); 
            z-index: 2000; 
            align-items: flex-end; 
            justify-content: center; 
        }
        #orderModal.show { display: flex; }
        .modal-content { 
            background: var(--cream); 
            width: 100%; 
            max-width: 500px; 
            max-height: 90vh; 
            overflow-y: auto; 
            border-radius: 20px 20px 0 0; 
            padding: 25px; 
        }

        .form-group { margin-bottom: 15px; }
        .form-group label { 
            display: block; 
            margin-bottom: 5px; 
            font-weight: bold; 
            color: var(--navy-blue); 
            font-size: 14px; 
        }
        input, textarea, select { 
            width: 100%; 
            padding: 12px; 
            border: 2px solid #e0e0e0; 
            border-radius: 10px; 
            font-size: 15px; 
            font-family: inherit; 
            -webkit-appearance: none;
            background: var(--white);
            color: var(--navy-blue);
        }
        input:focus, textarea:focus, select:focus { 
            outline: none; 
            border-color: var(--primary-red); 
        }

        .radio-group { display: flex; gap: 15px; margin: 15px 0; }
        .radio-option { 
            flex: 1; 
            padding: 15px; 
            border: 2px solid #e0e0e0; 
            border-radius: 12px; 
            cursor: pointer; 
            text-align: center; 
            transition: all 0.2s; 
            background: var(--white);
        }
        .radio-option:hover { border-color: var(--primary-red); }
        .radio-option.selected { 
            border-color: var(--primary-red); 
            background: rgba(196, 30, 58, 0.05); 
        }
        .radio-option label { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            font-weight: normal; 
            color: var(--navy-blue);
        }
        .radio-option input { width: auto; margin-right: 8px; cursor: pointer; }

        .datetime-row { display: flex; gap: 10px; }
        .datetime-row > div { flex: 1; }

        .btn-primary { 
            width: 100%; 
            background: var(--primary-red); 
            color: var(--white); 
            border: none; 
            padding: 16px; 
            border-radius: 25px; 
            font-size: 16px; 
            font-weight: bold; 
            margin-top: 10px; 
            cursor: pointer; 
            transition: all 0.2s; 
        }
        .btn-primary:hover { 
            background: var(--primary-dark); 
            transform: scale(1.02); 
        }
        .hidden { display: none !important; }
        
        .install-prompt {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--navy-blue);
            color: var(--white);
            padding: 12px 20px;
            border-radius: 25px;
            box-shadow: 0 4px 12px rgba(15, 42, 68, 0.3);
            z-index: 999;
            display: none;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            animation: slideUp 0.3s ease;
        }
        @keyframes slideUp {
            from { transform: translateX(-50%) translateY(100%); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }
        .install-prompt button {
            background: var(--accent-gold);
            color: var(--navy-blue);
            border: none;
            padding: 8px 16px;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="header">
        <img src="icons/icon-192x192.png" alt="Logo Tchie Nos Pizzeria">
        <h1>Tchie Nos Pizzeria</h1>
        <p>Commandez en ligne ‚Ä¢ Paiement √† la livraison</p>
        <div class="badges">
            <span class="badge">üõµ Livraison GRATUITE</span>
            <span class="badge">üìç 5km Del√©mont</span>
        </div>
    </div>

    <div class="nav">
        <button class="active" onclick="showCategory('pizzas', this)">üçï Pizzas</button>
        <button onclick="showCategory('pates', this)">üçù P√¢tes</button>
        <button onclick="showCategory('salades', this)">ü•ó Salades</button>
        <button onclick="showCategory('autres', this)">ü•© Viandes</button>
        <button onclick="showCategory('enfants', this)">üë∂ Bambinis</button>
    </div>

    <div class="container">
        <div id="pizzas" class="category active"></div>
        <div id="pates" class="category"></div>
        <div id="salades" class="category"></div>
        <div id="autres" class="category"></div>
        <div id="enfants" class="category"></div>
    </div>

    <div class="cart">
        <div>
            <small id="cart-count" style="color: var(--navy-blue);">0 article</small><br>
            <strong style="color: var(--navy-blue);">Total: <span id="cart-total" style="color:var(--primary-red);font-size:20px;">0.00</span> CHF</strong>
        </div>
        <button onclick="openOrder()" id="order-btn" disabled>üì± Commander</button>
    </div>

    <div id="installPrompt" class="install-prompt">
        üì≤ Ajouter √† l'√©cran d'accueil
        <button onclick="installPWA()">Installer</button>
    </div>

    <div id="orderModal" onclick="if(event.target.id=='orderModal')closeOrder()">
        <div class="modal-content">
            <h2>üìù Votre commande</h2>
            <div id="order-list" style="background:var(--white);padding:15px;border-radius:10px;margin:15px 0;max-height:200px;overflow-y:auto;"></div>

            <div class="form-group">
                <label>Nom et pr√©nom *</label>
                <input type="text" id="name" placeholder="Jean Dupont">
            </div>

            <div class="form-group">
                <label>T√©l√©phone *</label>
                <input type="tel" id="phone" placeholder="079 123 45 67">
            </div>

            <div class="form-group">
                <label>Mode de r√©ception *</label>
                <div class="radio-group">
                    <div class="radio-option" onclick="selectMode('delivery')">
                        <label><input type="radio" name="mode" value="delivery" id="mode-delivery" onchange="onModeChange()" style="width:auto;"> üõµ Livraison</label>
                    </div>
                    <div class="radio-option" onclick="selectMode('pickup')">
                        <label><input type="radio" name="mode" value="pickup" id="mode-pickup" onchange="onModeChange()" style="width:auto;"> üõçÔ∏è √Ä emporter</label>
                    </div>
                </div>
            </div>

            <div class="form-group" id="address-group">
                <label>Adresse de livraison *</label>
                <textarea id="address" rows="2" placeholder="Rue de la Gare 10, 2800 Del√©mont"></textarea>
            </div>

            <div class="form-group">
                <label>Date et heure * (minimum 45 min apr√®s l'heure actuelle)</label>
                <div class="datetime-row">
                    <div><input type="date" id="delivery-date" onchange="updateTimes()"></div>
                    <div><select id="delivery-time"><option value="">Choisir l'heure</option></select></div>
                </div>
                <small style="color:var(--navy-blue);">Horaires: 11h30-14h et 18h30-21h30</small>
            </div>

            <div class="form-group">
                <label>Commentaires</label>
                <textarea id="notes" rows="2" placeholder="Allergies, instructions..."></textarea>
            </div>

            <button class="btn-primary" onclick="sendOrder()">üì≤ Envoyer par WhatsApp</button>
        </div>
    </div>

    <script>
        var menuData = {
            pizzas: [
                {n: "Pizza Esposito's", d: "Tomate, ail, c√¢pres, origan", p: 16.90},
                {n: "Pizza Sicilia", d: "Tomate, mozzarella, aubergine, parmesan, basilic", p: 16.90},
                {n: "Pizza Calabria", d: "Tomate, mozzarella, chorizo, poivrons, oignons", p: 17.90},
                {n: "Pizza Piemonte", d: "Tomate, mozzarella, pommes de terre, olives, persil", p: 17.90},
                {n: "Pizza Puglia", d: "Tomate, mozzarella, brocoli, jambon √† l'os, tomates s√©ch√©es", p: 18.90},
                {n: "Pizza Abbruzzo", d: "Tomate, mozzarella, thon, oignons, c√¢pres, anchois", p: 18.90},
                {n: "Pizza Toscana", d: "Tomate, mozzarella, l√©gumes de saison", p: 19.90},
                {n: "Pizza Umbria", d: "Tomate, mozzarella, champignons, saucisse d'Ajoie", p: 19.90},
                {n: "Pizza Lazio", d: "Tomate, mozzarella, lard du Noirmont, poivrons, miel", p: 20.90},
                {n: "Pizza Tutti al Mare!", d: "Tomate, mozzarella, crevettes, salade, sauce", p: 21.90},
                {n: "Pizza Emilia Romagna", d: "Tomate, mozzarella, hachis de b≈ìuf, oignons, √©pices", p: 21.90},
                {n: "Pizza Lombardia", d: "Tomate, mozzarella, chevrette de Movelier, champignons", p: 22.90},
                {n: "Pizza Trentino", d: "Tomate, mozzarella, lard, pav√© du P√®re Joseph", p: 22.90},
                {n: "Pizza Liguria", d: "Tomate, mortadelle, pesto, pistaches, burrata", p: 23.90},
                {n: "Pizza Campania", d: "Tomate, mozzarella, cr√®me fra√Æche, jambon cru, roquette", p: 23.90},
                {n: "Pizza Tchie Nos's", d: "Tomate, mozzarella, t√™te de moine, R√™ve du Jura, gruy√®re", p: 23.90}
            ],
            pates: [
                {n: "P√¢tes Ail et pesto", d: "P√¢tes fra√Æches sauce ail et pesto maison", p: 15.90},
                {n: "P√¢tes Sauce tomate", d: "P√¢tes fra√Æches sauce tomate basilic", p: 13.90},
                {n: "P√¢tes Arrabiata", d: "P√¢tes fra√Æches sauce tomate piment√©e", p: 15.90},
                {n: "P√¢tes Carbonara", d: "P√¢tes fra√Æches, lardons, ≈ìuf, parmesan", p: 16.90},
                {n: "P√¢tes Bolognaise", d: "P√¢tes fra√Æches sauce bolognaise maison", p: 16.90},
                {n: "Lasagnes au b≈ìuf", d: "Lasagnes maison au b≈ìuf et b√©chamel", p: 17.90},
                {n: "Lasagnes aux l√©gumes", d: "Lasagnes maison aux l√©gumes de saison", p: 16.90}
            ],
            salades: [
                {n: "Salade verte", d: "M√©lange de salades vertes, vinaigrette maison", p: 6.00},
                {n: "Salade m√™l√©e", d: "Salade compos√©e avec l√©gumes frais", p: 8.00},
                {n: "Grande m√™l√©e", d: "Grande salade compos√©e g√©n√©reuse", p: 16.00},
                {n: "Petite Caprese", d: "Tomates, mozzarella, basilic, huile d'olive", p: 10.00},
                {n: "Grande Caprese", d: "Grande assiette Caprese", p: 16.00},
                {n: "Chef verte", d: "Salade compl√®te du chef avec garnitures", p: 18.00},
                {n: "Ch√®vre verte", d: "Salade avec ch√®vre chaud, miel, noix", p: 19.90},
                {n: "L√©gumes de saison (P)", d: "Assiette de l√©gumes de saison grill√©s", p: 8.00},
                {n: "L√©gumes de saison (G)", d: "Grande assiette de l√©gumes de saison", p: 14.90}
            ],
            autres: [
                {n: "Tranche pan√©e de poulet", d: "Escalope de poulet pan√©e avec garniture", p: 18.00},
                {n: "Roastbeef", d: "Tranches de roastbeef, sauce, garniture", p: 25.00},
                {n: "Tartare de b≈ìuf", d: "Tartare de b≈ìuf pr√©par√© maison, frites", p: 25.00}
            ],
            enfants: [
                {n: "Bambini - Poulet pan√©", d: "Tranche pan√©e de poulet avec frites ou p√¢tes", p: 12.90},
                {n: "Bambini - P√¢tes", d: "P√¢tes au choix: tomate, pesto, ou nature", p: 12.90}
            ]
        };

        var cart = {};
        var deferredPrompt;

        function init() {
            for (var cat in menuData) {
                var html = '';
                var items = menuData[cat];
                for (var i = 0; i < items.length; i++) {
                    var it = items[i];
                    var id = cat + '-' + i;
                    html += '<div class="item">';
                    html += '<h3>' + it.n + '</h3>';
                    html += '<p>' + it.d + '</p>';
                    html += '<div class="price">' + it.p.toFixed(2) + ' CHF</div>';
                    html += '<div class="qty-control">';
                    html += '<button onclick="updateQty(\'' + id + '\', -1)" disabled id="btn-min-' + id + '">-</button>';
                    html += '<span id="qty-' + id + '">0</span>';
                    html += '<button onclick="updateQty(\'' + id + '\', 1)" id="btn-plus-' + id + '">+</button>';
                    html += '</div></div>';
                }
                document.getElementById(cat).innerHTML = html;
            }
            initDate();
            
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js')
                    .then(function(reg) { console.log('SW registered'); })
                    .catch(function(err) { console.log('SW error', err); });
            }
            
            window.addEventListener('beforeinstallprompt', function(e) {
                e.preventDefault();
                deferredPrompt = e;
                document.getElementById('installPrompt').style.display = 'flex';
            });
            
            window.addEventListener('appinstalled', function() {
                document.getElementById('installPrompt').style.display = 'none';
                deferredPrompt = null;
            });
        }
        
        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then(function(choiceResult) {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('PWA installed');
                    }
                    document.getElementById('installPrompt').style.display = 'none';
                    deferredPrompt = null;
                });
            }
        }

        function showCategory(catId, btn) {
            var cats = document.getElementsByClassName('category');
            for (var i = 0; i < cats.length; i++) cats[i].classList.remove('active');
            document.getElementById(catId).classList.add('active');
            var buttons = document.querySelectorAll('.nav button');
            for (var i = 0; i < buttons.length; i++) buttons[i].classList.remove('active');
            btn.classList.add('active');
            window.scrollTo(0, 0);
        }

        function updateQty(id, change) {
            if (!cart[id]) cart[id] = 0;
            cart[id] += change;
            if (cart[id] < 0) cart[id] = 0;
            if (cart[id] > 10) cart[id] = 10;
            document.getElementById('qty-' + id).textContent = cart[id];
            document.getElementById('btn-min-' + id).disabled = (cart[id] <= 0);
            document.getElementById('btn-plus-' + id).disabled = (cart[id] >= 10);
            updateCartDisplay();
        }

        function updateCartDisplay() {
            var total = 0, count = 0;
            for (var id in cart) {
                if (cart[id] > 0) {
                    var parts = id.split('-');
                    total += menuData[parts[0]][parseInt(parts[1])].p * cart[id];
                    count += cart[id];
                }
            }
            document.getElementById('cart-total').textContent = total.toFixed(2);
            document.getElementById('cart-count').textContent = count + (count > 1 ? ' articles' : ' article');
            document.getElementById('order-btn').disabled = (count === 0);
        }

        function selectMode(mode) {
            document.getElementById('mode-' + mode).checked = true;
            onModeChange();
        }

        function onModeChange() {
            var isDelivery = document.getElementById('mode-delivery').checked;
            document.querySelectorAll('.radio-option')[0].classList.toggle('selected', isDelivery);
            document.querySelectorAll('.radio-option')[1].classList.toggle('selected', !isDelivery);
            document.getElementById('address-group').classList.toggle('hidden', !isDelivery);
        }

        function initDate() {
            var today = new Date();
            var yyyy = today.getFullYear();
            var mm = String(today.getMonth() + 1).padStart(2, '0');
            var dd = String(today.getDate()).padStart(2, '0');
            document.getElementById('delivery-date').min = yyyy + '-' + mm + '-' + dd;
            document.getElementById('delivery-date').value = yyyy + '-' + mm + '-' + dd;
            updateTimes();
        }

        function updateTimes() {
            var dateInput = document.getElementById('delivery-date').value;
            var timeSelect = document.getElementById('delivery-time');
            timeSelect.innerHTML = '<option value="">Choisir l\'heure</option>';
            if (!dateInput) return;
            var selectedDate = new Date(dateInput);
            var now = new Date();
            var isToday = selectedDate.toDateString() === now.toDateString();
            var slots = [];
            for (var h = 11; h <= 14; h++) {
                for (var m = 0; m < 60; m += 15) {
                    if (h === 11 && m < 30) continue;
                    if (h === 14 && m > 0) break;
                    slots.push({h: h, m: m});
                }
            }
            for (var h = 18; h <= 21; h++) {
                for (var m = 0; m < 60; m += 15) {
                    if (h === 18 && m < 30) continue;
                    if (h === 21 && m > 30) break;
                    slots.push({h: h, m: m});
                }
            }
            if (isToday) {
                var minTime = new Date(now.getTime() + 45 * 60000);
                slots = slots.filter(function(slot) {
                    var slotTime = new Date();
                    slotTime.setHours(slot.h, slot.m, 0, 0);
                    return slotTime >= minTime;
                });
            }
            for (var i = 0; i < slots.length; i++) {
                var timeStr = String(slots[i].h).padStart(2, '0') + ':' + String(slots[i].m).padStart(2, '0');
                var opt = document.createElement('option');
                opt.value = timeStr;
                opt.textContent = timeStr;
                timeSelect.appendChild(opt);
            }
        }

        function openOrder() {
            updateTimes();
            var list = document.getElementById('order-list');
            var html = '';
            var total = 0;
            for (var id in cart) {
                if (cart[id] > 0) {
                    var parts = id.split('-');
                    var it = menuData[parts[0]][parseInt(parts[1])];
                    var sub = it.p * cart[id];
                    total += sub;
                    html += '<div style="display:flex;justify-content:space-between;padding:5px 0;border-bottom:1px solid #ddd;">';
                    html += '<span>' + cart[id] + '√ó ' + it.n + '</span>';
                    html += '<span>' + sub.toFixed(2) + ' CHF</span></div>';
                }
            }
            html += '<div style="font-weight:bold;color:var(--primary-red);font-size:18px;margin-top:10px;padding-top:10px;border-top:2px solid var(--primary-red);display:flex;justify-content:space-between;">';
            html += '<span>TOTAL</span><span>' + total.toFixed(2) + ' CHF</span></div>';
            list.innerHTML = html;
            document.getElementById('orderModal').classList.add('show');
        }

        function closeOrder() {
            document.getElementById('orderModal').classList.remove('show');
        }

        function sendOrder() {
            var name = document.getElementById('name').value.trim();
            var phone = document.getElementById('phone').value.trim();
            var isDelivery = document.getElementById('mode-delivery').checked;
            var isPickup = document.getElementById('mode-pickup').checked;
            var address = document.getElementById('address').value.trim();
            var date = document.getElementById('delivery-date').value;
            var time = document.getElementById('delivery-time').value;
            var notes = document.getElementById('notes').value.trim();

            if (!name || !phone) { alert('Veuillez remplir le nom et t√©l√©phone'); return; }
            if (!isDelivery && !isPickup) { alert('Veuillez choisir le mode de r√©ception'); return; }
            if (isDelivery && !address) { alert('Veuillez indiquer l\'adresse'); return; }
            if (!date || !time) { alert('Veuillez choisir la date et l\'heure'); return; }

            var msg = 'üçï *NOUVELLE COMMANDE TCHIE NOS* %0A%0A';
            msg += 'üë§ *Client:* ' + encodeURIComponent(name) + '%0A';
            msg += 'üìû *T√©l√©phone:* ' + encodeURIComponent(phone) + '%0A';
            msg += isDelivery ? 'üõµ *Livraison*%0Aüìç *Adresse:* ' + encodeURIComponent(address) + '%0A' : 'üõçÔ∏è *√Ä emporter*%0A';
            msg += 'üìÖ *Date:* ' + date + '%0Aüïê *Heure:* ' + time + '%0A%0A*Commande:*%0A';

            var total = 0;
            for (var id in cart) {
                if (cart[id] > 0) {
                    var parts = id.split('-');
                    var it = menuData[parts[0]][parseInt(parts[1])];
                    total += it.p * cart[id];
                    msg += '‚Ä¢ ' + cart[id] + '√ó ' + it.n + ' - ' + it.p.toFixed(2) + ' CHF%0A';
                }
            }
            msg += '%0Aüí∞ *TOTAL: ' + total.toFixed(2) + ' CHF*';
            if (notes) msg += '%0A%0Aüìù *Commentaires:* ' + encodeURIComponent(notes);
            msg += '%0A%0A_Paiement √† la livraison_';

            window.open('https://wa.me/41779431480?text= ' + msg, '_blank');

            cart = {};
            document.querySelectorAll('.qty-control span').forEach(function(el) { el.textContent = '0'; });
            document.querySelectorAll('.qty-control button:first-child').forEach(function(el) { el.disabled = true; });
            updateCartDisplay();
            closeOrder();
            document.getElementById('name').value = '';
            document.getElementById('phone').value = '';
            document.getElementById('address').value = '';
            document.getElementById('notes').value = '';
            document.getElementById('mode-delivery').checked = false;
            document.getElementById('mode-pickup').checked = false;
            document.querySelectorAll('.radio-option').forEach(function(el) { el.classList.remove('selected'); });
            document.getElementById('address-group').classList.remove('hidden');
            initDate();
        }

        init();
    </script>
</body>
</html>

